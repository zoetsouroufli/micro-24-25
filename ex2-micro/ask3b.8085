START: 
CALL KIND  ;με την KIND αποθηκεύουμε στον καταχωρητή Α την είσοδο από το πληκτρολόγιο 

CPI 01H    ;αν η είσοδος είναι μικρότερη του 1 (δηλαδή 0) ξαναπάρε είσοδο
JC START

CPI 09H    ;αν η είσοδος είναι μικρότερη του 9 (άρα όχι 9) ξαναπάρε είσοδο
JNC START  

CPI 05H    ;αν η είσοδος είναι μικρότερη του 5 (1,2,3,4) πήγαινε στη αντίστοιχη ρουτίνα
JC IT_IS_LESS_THAN_5

JMP IT_IS_LESS_THAN_9   ;αλλιώς πήγαινε στην άλλη ρουτίνα


IT_IS_LESS_THAN_5:
MVI E,00H      ;αρχικοποιώ μετρητή
MVI A,01H      ;αρχικοποιώ τον Α που περιέχει το αποτέλεσμα που θέλω να βλέπω στο output με 1


LSB_LOOP: 
MOV C,A        ;κρατάω τον Α στον καταχωρητή C 
CMA
STA 3000H      ;στέλνω τον Α στο output βλέπω αντίστοιχο LEDaki να ανάβει
MVI B,10H
CALL DELB      ;καθυστέρηση 
INR E          ;αυξάνουμε τον μετρητή μας Ε κατά 1
MOV A,E        ;θέλω να συγκρίνω με τον Ε άρα πρέπει να χρησιμοποιήσω τον Α
CPI 04H        ;συγκρίνω μετρητή με τον αριθμό 4 (τόσες φορές θέλω να πραγματοποιείται η λούπα μου)
JNC START      ;ξαναπάρε input αν τελείωσες
MOV E,A         
MOV A,C  
RLC            ;θέλω να ανάψει το επόμενο από τα αριστερά LEDaki 
               ;άρα κάνω RLC στον Α που περιέχει το output μου
JMP LSB_LOOP   


IT_IS_LESS_THAN_9:
MVI E,00H   
MVI A,80H      ;αρχικοποιώ Α από εκεί που θέλω να ανάβει το πρώτο LEDaki δηλαδή το MSB μου 


MSB_LOOP: 
MOV C,A 
CMA
STA 3000H
MVI B,10H
CALL DELB
INR E          
MOV A,E
CPI 04H
JNC START
MOV E,A
MOV A,C
RRC           ;τώρα θέλω να ανάβουν τα LEDakia προς τα δεξία άρα αλλάζω τη φορά (RRC)
              ;που αλλάζει ο Α (output)
JMP MSB_LOOP

END